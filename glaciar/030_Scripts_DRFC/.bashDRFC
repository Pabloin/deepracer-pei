
echo "En DRFC"

# TODO

# Funcion que tome del Config y PISE ... 


alias HH="cd ~/deepracer-pei/deepracer-for-cloud"
alias MM="cd ~/MINIO_SYNC/Spot-Tracks"


export PATH_DOTS_SCRIPTS=~/deepracer-pei/glaciar/010_Configs/DRFC_Configs


# ~/deepracer-pei/glaciar/010_Config$ tree -La 2
#     └── DRFC_Configs
#        ├── .config_DRFC_000_reset
#        ├── .config_DRFC_001_original
#        └── .config_DRFC_002_local_minio

alias D000="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_000_reset"
alias D001a="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_001_aws_orig"
alias D001l="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_001_local_orig"
alias D002="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_002_local_minio"
alias D003="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_003_aws_cpu"

# TODO: Se vana a agregar o FIX It!
alias D004="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_004_aws_cpu"
alias D005="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_005_aws_cpu"
alias D006="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_006_local_gpu"
alias D007="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_007_local_gpu"
alias D008="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_008_local_gpu"
alias D009="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_009_local_gpu"
alias D010="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_010_local_gpu"

alias D011="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_011_local_gpu"
alias D012="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_012_local_gpu"
alias D013="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_013_local_gpu"
alias D014="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_014_local_gpu"
alias D015="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_015_local_gpu"

alias D016="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_016_local_gpu"
alias D017="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_017_local_gpu"
alias D018="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_018_local_gpu"
alias D019="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_019_local_gpu"
alias D020="cd ${PATH_DOTS_SCRIPTS}/.config_DRFC_020_local_gpu"


function gia() {

    git add .
    git commit -m $1
    git push
}


# REPETIDA CON DOTS (Mantener sincro iguales)
function prof() {

    PROF_UBUNTU=~/.profile

    if [ -f ${PROF_UBUNTU} ]; then
        source ${PROF_UBUNTU}
    fi
}


cat ~/.aws/config | grep profile

echo ""


# alias hello="cat ~/hello.txt"

alias hello="vim ~/hello.txt"

alias   C="vim ~/.aws/credentials"


S3_SMINIO_SOURCE=~/MINIO_SYNC
S3_BUCKET_TARGET=dr-models-glaciar-dots-to-pabloedu-gmail

# KEY_MODEL=Ulab-Tracks
KEY_MODEL=Spot-Tracks


function spUp() {

    echo "                                                                 "
    echo "  cd           ${S3_SMINIO_SOURCE}/${KEY_MODEL}                  "    
    echo "                                                                 "
    echo "  aws s3 sync  ${S3_SMINIO_SOURCE}/${KEY_MODEL}/  \   "
    echo "          s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/  \   "
    echo "                 --profile bastion_PEZE_DRFC_CPU       "
    echo "                                                                 "
    echo "                                                                 "
        
    read -p "Hacemos UP? (Y/N): " confirm && [[ $confirm == [yY] || $confirm == [yY][eE][sS] ]] || return 1

    cd  ${S3_SMINIO_SOURCE}/${KEY_MODEL} 
                                                                
    aws s3 sync  ${S3_SMINIO_SOURCE}/${KEY_MODEL}/  \
            s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/  \
                    --profile bastion_PEZE_DRFC_CPU    

}

# Down de local Minio
function spDown() {

    echo "                                   "
    echo "  mc ls local/bucket               "    
    echo "                                   "
 
    mc ls local/bucket    

    read -p "¿Modelo Version Name?  (Ejemplo: "lgy-model-NNN" o "aws-beast-nnn"? " MODEL_VERSION_NAME

    mc cp local/bucket/${MODEL_VERSION_NAME}  ${KEY_MODEL}/ --recursive
}

function spImport() {

    aws deepracer list-models --model-type REINFORCEMENT_LEARNING  \
                 --query 'Models[].{ModelArn: ModelArn, ModelName: ModelName} '  \
                 --profile  bastion_PEZE_DRFC_CPU     \
                 --output table

    echo "  "
    echo "  aws s3 ls s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/  \               "
    echo "               --profile  bastion_PEZE_DRFC_CPU           "
    echo "  "

    aws s3 ls s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/  \
                 --profile  bastion_PEZE_DRFC_CPU 

    read -p "¿Modelo Version Name?  (Ejemplo: "lgy-model-NNN" o "aws-beast-nnn"? " MODEL_VERSION_NAME

    echo "   "
    echo "  aws deepracer import-model \                 "
    echo "      --type REINFORCEMENT_LEARNING \          "
    echo "      --name ${MODEL_VERSION_NAME}  \                 "
    echo "      --model-artifacts-s3-path s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/${MODEL_VERSION_NAME} \ "
    echo "      --role-arn arn:aws:iam::307424703238:role/LabRole \      "
    echo "      --profile  bastion_PEZE_DRFC_CPU               "
    echo "   "

    aws deepracer import-model \
        --type REINFORCEMENT_LEARNING \
        --name ${MODEL_VERSION_NAME}  \
        --model-artifacts-s3-path s3://${S3_BUCKET_TARGET}/${KEY_MODEL}/${MODEL_VERSION_NAME} \
        --role-arn arn:aws:iam::307424703238:role/LabRole \
        --profile  bastion_PEZE_DRFC_CPU               
   
}




source ~/deepracer-pei/deepracer-for-cloud/bin/activate.sh


function menu() {

cat << EOM

menu, $1!

Estoy en  ~/deepracer-pei/deepracer-for-cloud/glaciar/030_Scripts_DRFC/.bashDRFC

    - prof - hello - doing 

    - SPOT (Minio): spDown | spUp | spImport 

    # - drSync      |  drDown     | drUp  | TBD - logs | model 
    # - drImport    | drImportGlaciar 
    # - goVirginia  | _set _getRegion  
    # - aws.ec2.run | aws.ec2.all 


    alias - C | HH MM | 
    
                        # B01 (B,C,D) | F01 | F02 | F02C,D,H,T,W | A01 a,b,c,d..  

    -------------------------------------------------------- 
    S3_SMINIO_SOURCE=${S3_SMINIO_SOURCE}
    S3_BUCKET_TARGET=${S3_BUCKET_TARGET}
    MODEL = ${KEY_MODEL}  

EOM




    cat ~/.aws/config | grep profile

    echo ""


}

menu



function doing() {

    # The string after << indicates where to stop.
    cat << EOM 
    
    DOING:

    - pablo-eze-edu: Spots ... TBD ... 
    
    # jupyter notebook como servicio
    

    STATUS:
    -           JLab | Ubuntu | TBD | TBD |

    - PEZEG  |   X   |    X   |  -  |  100% config ... USD 9 gastado
    - DEMET  |   X   |    X   |  -  |  100% config ... USD 0 gastado

    - Notas... 
    

EOM
}
# doing